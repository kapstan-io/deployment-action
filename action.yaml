name: "Kapstan Deployment Github Action"
description: "GitHub Action to deploy your applications directly from the Github Pipeline."
author: "Kapstan"
branding:
  icon: activity
  color: purple
inputs:
  organization_id:
    description: "The unique identifier of the organization"
    required: true
  environment_id:
    description: "The unique identifier of the environment"
    required: true
  application_id:
    description: "The unique identifier of the application"
    required: true
  image_tag:
    description: "The image tag you want to deploy"
    required: false
  image_repository_name:
    description: "The image repository name that this image tag belongs to"
    required: true
  kapstan_api_key:
    description: "Your Kapstan API key"
    required: true
outputs:
  deployment-id:
    description: "The unique identifier of the deployment if no failure while triggering"
    value: ${{ steps.kapstan-deployment-action.outputs.deployment-id }}
  message:
    description: "Message of action denoting status of deployment"
    value: ${{ steps.kapstan-deployment-action.outputs.message }}
runs:
  using: "docker"
  image: "Dockerfile"
  args:
    - ${{ inputs.organization_id}}
    - ${{ inputs.environment_id}}
    - ${{ inputs.application_id}}
    - ${{ inputs.image_tag}}
    - ${{ inputs.image_repository_name}}
    - ${{ inputs.kapstan_api_key}}
